define(["underscore","backbone","templateregistry"],function(e,t,n){var r=t.View.extend({initialize:function(){if(!this.template&&(!this.options.template||!e.isString(this.options.template)))throw new Error("All views must specify their template at creation");this.template=this.template?this.template:this.options.template,e.bindAll(this,"beforeRender","render","afterRender");var t=this;this.render=e.wrap(this.render,function(e){return t.beforeRender(),e(),t.afterRender(),t})},beforeRender:function(){},afterRender:function(){},render:function(){var e=this.options.data,t;this.model&&(e=this.model.toJSON()),this.template in n?(t=n[this.template],this.$el.html(t(e))):this.$el.html(this.template)},defaultAction:function(){this.render()},dispose:function(){this.$el.empty(),this.model&&this.model.off()}});return r});